import type { Order, Merchant } from "@/types";

export const mockMerchants: Record<string, Merchant> = {
  nike: {
    id: "merchant_nike",
    name: "Nike",
    domain: "nike.com",
    logoUrl: "/merchants/nike.svg",
    returnPolicyUrl: "https://www.nike.com/help/a/returns-policy",
    supportEmail: "support@nike.com",
    supportUrl: "https://www.nike.com/help",
    defaultReturnWindowDays: 30,
  },
  amazon: {
    id: "merchant_amazon",
    name: "Amazon",
    domain: "amazon.com",
    logoUrl: "/merchants/amazon.svg",
    returnPolicyUrl: "https://www.amazon.com/returns",
    supportUrl: "https://www.amazon.com/contact-us",
    defaultReturnWindowDays: 30,
  },
  apple: {
    id: "merchant_apple",
    name: "Apple",
    domain: "apple.com",
    logoUrl: "/merchants/apple.svg",
    returnPolicyUrl: "https://www.apple.com/shop/help/returns_refund",
    supportUrl: "https://support.apple.com",
    defaultReturnWindowDays: 14,
  },
  uniqlo: {
    id: "merchant_uniqlo",
    name: "Uniqlo",
    domain: "uniqlo.com",
    logoUrl: "/merchants/uniqlo.svg",
    returnPolicyUrl: "https://www.uniqlo.com/us/en/returns",
    supportEmail: "support@uniqlo.com",
    defaultReturnWindowDays: 30,
  },
  bestbuy: {
    id: "merchant_bestbuy",
    name: "Best Buy",
    domain: "bestbuy.com",
    logoUrl: "/merchants/bestbuy.svg",
    returnPolicyUrl: "https://www.bestbuy.com/returns",
    supportUrl: "https://www.bestbuy.com/support",
    defaultReturnWindowDays: 15,
  },
};

export const mockOrders: Order[] = [
  {
    id: "ord_001",
    userId: "user_001",
    orderNumber: "C0123456789",
    merchant: mockMerchants.nike,
    items: [
      {
        id: "item_001",
        name: "Nike Air Max 90",
        variant: "Size 10, White/Black",
        unitPriceCents: 15000,
        quantity: 1,
        totalCents: 15000,
        imageUrl: "https://images.unsplash.com/photo-1542291026-7eec264c27ff?w=400",
        productUrl: "https://nike.com/air-max-90",
        returnStatus: "eligible",
      },
    ],
    subtotalCents: 15000,
    taxCents: 1275,
    shippingCents: 0,
    totalCents: 16275,
    currency: "USD",
    status: "delivered",
    orderedAt: "2025-01-05T10:30:00Z",
    shippedAt: "2025-01-06T15:00:00Z",
    deliveredAt: "2025-01-10T14:34:00Z",
    shipment: {
      id: "ship_001",
      carrier: "fedex",
      carrierName: "FedEx",
      trackingNumber: "789456123012",
      trackingUrl: "https://www.fedex.com/track?trknbr=789456123012",
      status: "delivered",
      estimatedDeliveryAt: "2025-01-10T18:00:00Z",
      actualDeliveryAt: "2025-01-10T14:34:00Z",
      deliveryLocation: "Front door",
      events: [
        {
          id: "evt_001_5",
          status: "Delivered",
          statusDetail: "Package delivered to front door",
          location: "San Francisco, CA",
          occurredAt: "2025-01-10T14:34:00Z",
        },
        {
          id: "evt_001_4",
          status: "Out for Delivery",
          location: "San Francisco, CA",
          occurredAt: "2025-01-10T08:15:00Z",
        },
        {
          id: "evt_001_3",
          status: "In Transit",
          location: "Oakland, CA",
          occurredAt: "2025-01-09T16:00:00Z",
        },
        {
          id: "evt_001_2",
          status: "In Transit",
          location: "Memphis, TN",
          occurredAt: "2025-01-08T04:30:00Z",
        },
        {
          id: "evt_001_1",
          status: "Shipped",
          statusDetail: "Package picked up",
          location: "Portland, OR",
          occurredAt: "2025-01-06T15:00:00Z",
        },
      ],
    },
    returnPolicy: {
      id: "policy_001",
      isEligible: true,
      returnWindowDays: 30,
      deadlineAt: "2025-02-09T23:59:59Z",
      daysRemaining: 26,
      returnType: "full_refund",
      freeReturn: true,
      conditionRequirements: ["Unworn", "Original packaging"],
      returnInstructions: "Visit nike.com/returns to initiate your return. Print the prepaid label and drop off at any FedEx location.",
      returnPortalUrl: "https://nike.com/returns",
    },
    source: "gmail",
    sourceEmailId: "msg_abc123",
    sourceConfidence: 0.98,
  },
  {
    id: "ord_002",
    userId: "user_001",
    orderNumber: "W987654321",
    merchant: mockMerchants.apple,
    items: [
      {
        id: "item_002",
        name: 'MacBook Pro 14"',
        variant: "M3 Pro, 18GB RAM, 512GB SSD, Space Black",
        unitPriceCents: 199900,
        quantity: 1,
        totalCents: 199900,
        imageUrl: "https://images.unsplash.com/photo-1517336714731-489689fd1ca8?w=400",
        productUrl: "https://apple.com/macbook-pro",
        returnStatus: "none",
      },
    ],
    subtotalCents: 199900,
    taxCents: 16992,
    shippingCents: 0,
    totalCents: 216892,
    currency: "USD",
    status: "shipped",
    orderedAt: "2025-01-10T09:00:00Z",
    shippedAt: "2025-01-11T12:00:00Z",
    shipment: {
      id: "ship_002",
      carrier: "ups",
      carrierName: "UPS",
      trackingNumber: "1Z999AA10123456784",
      trackingUrl: "https://ups.com/track?tracknum=1Z999AA10123456784",
      status: "in_transit",
      estimatedDeliveryAt: "2025-01-15T18:00:00Z",
      events: [
        {
          id: "evt_002_3",
          status: "In Transit",
          location: "Louisville, KY",
          occurredAt: "2025-01-13T10:30:00Z",
        },
        {
          id: "evt_002_2",
          status: "In Transit",
          statusDetail: "Departed facility",
          location: "Shanghai, China",
          occurredAt: "2025-01-12T06:00:00Z",
        },
        {
          id: "evt_002_1",
          status: "Shipped",
          statusDetail: "Package picked up",
          location: "Shanghai, China",
          occurredAt: "2025-01-11T12:00:00Z",
        },
      ],
    },
    source: "gmail",
    sourceEmailId: "msg_def456",
    sourceConfidence: 0.99,
  },
  {
    id: "ord_003",
    userId: "user_001",
    orderNumber: "114-5678901-2345678",
    merchant: mockMerchants.amazon,
    items: [
      {
        id: "item_003",
        name: "Sony WH-1000XM5 Headphones",
        variant: "Black",
        unitPriceCents: 32800,
        quantity: 1,
        totalCents: 32800,
        imageUrl: "https://images.unsplash.com/photo-1505740420928-5e560c06d30e?w=400",
        productUrl: "https://amazon.com/dp/B09XS7JWHH",
        returnStatus: "eligible",
      },
      {
        id: "item_003b",
        name: "Headphone Stand",
        variant: "Walnut Wood",
        unitPriceCents: 2999,
        quantity: 1,
        totalCents: 2999,
        imageUrl: "https://images.unsplash.com/photo-1583394838336-acd977736f90?w=400",
        returnStatus: "eligible",
      },
    ],
    subtotalCents: 35799,
    taxCents: 3042,
    shippingCents: 0,
    totalCents: 38841,
    currency: "USD",
    status: "delivered",
    orderedAt: "2025-01-02T16:45:00Z",
    shippedAt: "2025-01-03T08:00:00Z",
    deliveredAt: "2025-01-05T11:23:00Z",
    shipment: {
      id: "ship_003",
      carrier: "amazon",
      carrierName: "Amazon Logistics",
      trackingNumber: "TBA123456789",
      trackingUrl: "https://amazon.com/track/TBA123456789",
      status: "delivered",
      actualDeliveryAt: "2025-01-05T11:23:00Z",
      deliveryLocation: "Handed to resident",
      events: [
        {
          id: "evt_003_3",
          status: "Delivered",
          statusDetail: "Handed directly to resident",
          location: "San Francisco, CA",
          occurredAt: "2025-01-05T11:23:00Z",
        },
        {
          id: "evt_003_2",
          status: "Out for Delivery",
          location: "San Francisco, CA",
          occurredAt: "2025-01-05T07:30:00Z",
        },
        {
          id: "evt_003_1",
          status: "Shipped",
          location: "Tracy, CA",
          occurredAt: "2025-01-03T08:00:00Z",
        },
      ],
    },
    returnPolicy: {
      id: "policy_003",
      isEligible: true,
      returnWindowDays: 30,
      deadlineAt: "2025-02-04T23:59:59Z",
      daysRemaining: 21,
      returnType: "full_refund",
      freeReturn: true,
      returnInstructions: "Visit Amazon Returns to start your return. Drop off at Whole Foods, Kohl's, or UPS.",
      returnPortalUrl: "https://amazon.com/returns",
    },
    source: "gmail",
    sourceEmailId: "msg_ghi789",
    sourceConfidence: 0.97,
  },
  {
    id: "ord_004",
    userId: "user_001",
    orderNumber: "UQ-20250108-001",
    merchant: mockMerchants.uniqlo,
    items: [
      {
        id: "item_004",
        name: "Ultra Light Down Jacket",
        variant: "Size M, Navy",
        unitPriceCents: 7990,
        quantity: 1,
        totalCents: 7990,
        imageUrl: "https://images.unsplash.com/photo-1551028719-00167b16eac5?w=400",
        returnStatus: "initiated",
      },
    ],
    subtotalCents: 7990,
    taxCents: 679,
    shippingCents: 0,
    totalCents: 8669,
    currency: "USD",
    status: "delivered",
    orderedAt: "2025-01-08T14:20:00Z",
    shippedAt: "2025-01-09T10:00:00Z",
    deliveredAt: "2025-01-12T16:45:00Z",
    shipment: {
      id: "ship_004",
      carrier: "usps",
      carrierName: "USPS",
      trackingNumber: "9400111899223100001234",
      status: "delivered",
      actualDeliveryAt: "2025-01-12T16:45:00Z",
      deliveryLocation: "Mailbox",
      events: [
        {
          id: "evt_004_2",
          status: "Delivered",
          statusDetail: "Delivered to mailbox",
          location: "San Francisco, CA",
          occurredAt: "2025-01-12T16:45:00Z",
        },
        {
          id: "evt_004_1",
          status: "Shipped",
          location: "Edison, NJ",
          occurredAt: "2025-01-09T10:00:00Z",
        },
      ],
    },
    returnPolicy: {
      id: "policy_004",
      isEligible: true,
      returnWindowDays: 30,
      deadlineAt: "2025-02-11T23:59:59Z",
      daysRemaining: 28,
      returnType: "full_refund",
      freeReturn: false,
      restockingFeePercent: 0,
      conditionRequirements: ["Unworn", "Tags attached"],
      returnInstructions: "Print return label from uniqlo.com/returns. Customer pays return shipping.",
    },
    source: "gmail",
    sourceEmailId: "msg_jkl012",
    sourceConfidence: 0.95,
  },
  {
    id: "ord_005",
    userId: "user_001",
    orderNumber: "BBY01-806123456789",
    merchant: mockMerchants.bestbuy,
    items: [
      {
        id: "item_005",
        name: 'Samsung 65" OLED TV',
        variant: "S95D Series",
        unitPriceCents: 229999,
        quantity: 1,
        totalCents: 229999,
        imageUrl: "https://images.unsplash.com/photo-1593359677879-a4bb92f829d1?w=400",
        returnStatus: "none",
      },
    ],
    subtotalCents: 229999,
    taxCents: 19550,
    shippingCents: 0,
    totalCents: 249549,
    currency: "USD",
    status: "processing",
    orderedAt: "2025-01-13T11:00:00Z",
    source: "gmail",
    sourceEmailId: "msg_mno345",
    sourceConfidence: 0.99,
  },
];

export function getOrderById(id: string): Order | undefined {
  return mockOrders.find((order) => order.id === id);
}

export function getOrdersByStatus(status: Order["status"]): Order[] {
  return mockOrders.filter((order) => order.status === status);
}

export function getReturnEligibleOrders(): Order[] {
  return mockOrders.filter(
    (order) =>
      order.status === "delivered" &&
      order.returnPolicy?.isEligible &&
      order.returnPolicy.daysRemaining &&
      order.returnPolicy.daysRemaining > 0
  );
}
